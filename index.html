<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Anem a Briza del Mar</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <h1>Anem a Briza del Mar</h1>
            </div>
            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#habitaciones">Habitaciones</a></li>
                <li><a href="#paquetes">Carta</a></li>
                <li><a href="#areas">Áreas</a></li>
                <li><a href="#valoraciones">Valoraciones</a></li>
                <li><a href="#contacto">Contacto</a></li>
            </ul>
            <div class="hamburger">
                <i class="fas fa-bars"></i>
                <i class="fas fa-times"></i>
            </div>
        </nav>
    </header>

    <input type="hidden" id="tipoHabitacion" value="">

    <section id="inicio" class="hero">
        <div class="search-container">
            <h2>Encuentra tu estadía perfecta</h2>
            <div class="search-box">
                <form class="search-form" id="searchForm">
                    <div class="search-input">
                        <i class="fas fa-calendar"></i>
                        <input type="date" id="fechaEntrada" placeholder="Llegada" required>
                    </div>
                    <div class="search-input">
                        <i class="fas fa-calendar"></i>
                        <input type="date" id="fechaSalida" placeholder="Salida" required>
                    </div>
                    <div class="search-input">
                        <i class="fas fa-user"></i>
                        <select id="numHuespedes" required>
                            <option value="">Huéspedes</option>
                            <option value="1">1 Huésped</option>
                            <option value="2">2 Huéspedes</option>
                            <option value="3">3 Huéspedes</option>
                            <option value="4">4 Huéspedes</option>
                            <option value="5">5 Huéspedes</option>
                            <option value="6">6 Huéspedes</option>
                        </select>
                    </div>
                    <button type="submit" class="search-button">Buscar</button>
                </form>
            </div>
            <div id="disponibilidadInfo" class="disponibilidad-info"></div>
        </div>
    </section>

    <section id="habitaciones" class="rooms">
        <h2>Nuestras Habitaciones</h2>
        <div class="room-grid">
            <div class="room-card" data-tipo="basica">
                <div class="room-image">
                    <img src="imagen del lugar/cuarto_basico.jpg" alt="Habitación Básica">
                    <span class="price">$10/noche</span>
                    <div class="disponibilidad-badge disponible">Disponible</div>
                </div>
                <div class="room-info">
                    <h3>Habitación Básica</h3>
                    <div class="precio-total">
                        <p class="precio-original">$10 por noche</p>
                        <p class="precio-final">Total: $<span class="total-noches">10</span></p>
                    </div>
                    <ul>
                        <li><i class="fas fa-bed"></i> 2 camas</li>
                        <li><i class="fas fa-bath"></i> 1 baño</li>
                        <li><i class="fas fa-fan"></i> Ventilador</li>
                    </ul>
                    <button class="book-now">Reservar Ahora</button>
                </div>
            </div>

            <div class="room-card" data-tipo="intermedia">
                <div class="room-image">
                    <img src="imagen del lugar/cuarto_intermedio.jpg" alt="Habitación Intermedia">
                    <span class="price">$25/noche</span>
                    <div class="disponibilidad-badge disponible">Disponible</div>
                </div>
                <div class="room-info">
                    <h3>Habitación Intermedia</h3>
                    <div class="precio-total">
                        <p class="precio-original">$25 por noche</p>
                        <p class="precio-final">Total: $<span class="total-noches">25</span></p>
                    </div>
                    <ul>
                        <li><i class="fas fa-bed"></i> 1 cama matrimonial + 2 camas</li>
                        <li><i class="fas fa-bath"></i> 2 baños</li>
                        <li><i class="fas fa-tv"></i> TV</li>
                        <li><i class="fas fa-coffee"></i> Desayuno incluido</li>
                    </ul>
                    <button class="book-now">Reservar Ahora</button>
                </div>
            </div>

            <div class="room-card" data-tipo="presidencial">
                <div class="room-image">
                    <img src="imagen del lugar/Suites presidenciales_2.jpg" alt="Suite Presidencial">
                    <span class="price">$45/noche</span>
                    <div class="disponibilidad-badge disponible">Disponible</div>
                </div>
                <div class="room-info">
                    <h3>Suite Presidencial</h3>
                    <div class="precio-total">
                        <p class="precio-original">$45 por noche</p>
                        <p class="precio-final">Total: $<span class="total-noches">45</span></p>
                    </div>
                    <ul>
                        <li><i class="fas fa-bed"></i> Cama King + 2 camas</li>
                        <li><i class="fas fa-hot-tub"></i> Jacuzzi</li>
                        <li><i class="fas fa-tv"></i> TV</li>
                        <li><i class="fas fa-glass-martini-alt"></i> Minibar</li>
                        <li><i class="fas fa-mountain"></i> Vista panorámica</li>
                        <li><i class="fas fa-coffee"></i> Desayuno incluido</li>
                    </ul>
                    <button class="book-now">Reservar Ahora</button>
                </div>
            </div>
        </div>
    </section>

    <section id="paquetes" class="section">
    <h2>Carta de Desayunos</h2>
        <div class="container">
            <div class="packages-grid">
                <div class="package-card">
                    <img src="desayuno y paquetes/comprar_desayuno_continental.jpg" alt="Desayuno Básico">
                    <h3>Desayuno Básico</h3>
                    <p>Desayuno continental con café, jugo, frutas y panadería.</p>
                    <div class="package-price">
                        <span class="price">$8</span>
                    </div>
                </div>
                <div class="package-card">
                    <img src="desayuno y paquetes/familiar.jpg" alt="Desayuno Familiar">
                    <h3>Desayuno Familiar</h3>
                    <p>Desayuno completo con opciones calientes y frías para toda la familia.</p>
                    <div class="package-price">
                        <span class="price">$12</span>
                    </div>
                </div>
                <div class="package-card">
                    <img src="desayuno y paquetes/familiar_Pareja.jpg" alt="Desayuno Pareja y familiar">
                    <h3>Desayuno Pareja</h3>
                    <p>Desayuno romántico con champán y delicias especiales.</p>
                    <div class="package-price">
                        <span class="price">$15</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="areas" class="areas">
        <h2>Áreas del Hotel</h2>
        <div class="areas-container">
            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <div class="carousel-slide active">
                        <img src="imagen del lugar/Spa.jpg" alt="Spa del Hotel">
                        <div class="area-info">
                            <h3>Spa & Wellness</h3>
                            <p>Relájese y rejuvenezca en nuestro spa de lujo con tratamientos especializados y masajes terapéuticos.</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="imagen del lugar/bar.jpg" alt="Bar del Hotel">
                        <div class="area-info">
                            <h3>Bar & Lounge</h3>
                            <p>Disfrute de cócteles artesanales y bebidas premium en nuestro elegante bar con vista al mar.</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="imagen del lugar/piscina.jpg" alt="Piscina del Hotel">
                        <div class="area-info">
                            <h3>Piscina</h3>
                            <p>Refrésquese en nuestra piscina climatizada con vista panorámica al océano.</p>
                        </div>
                    </div>
                    <div class="carousel-slide">
                        <img src="imagen del lugar/zona para niños.jpg" alt="Zona para Niños">
                        <div class="area-info">
                            <h3>Zona para Niños</h3>
                            <p>Los más pequeños se divertirán en nuestra zona infantil con actividades y juegos seguros.</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-btn prev" onclick="cambiarSlide(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="carousel-btn next" onclick="cambiarSlide(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="carousel-dots">
                    <span class="dot active" onclick="irASlide(0)"></span>
                    <span class="dot" onclick="irASlide(1)"></span>
                    <span class="dot" onclick="irASlide(2)"></span>
                    <span class="dot" onclick="irASlide(3)"></span>
                </div>
            </div>
        </div>
    </section>

    <section id="valoraciones" class="valoraciones">
        <h2>Valoraciones</h2>
        <div class="valoraciones-container">
            <h3>Reseñas de nuestros huéspedes</h3>
            <div class="reviews-grid">
                <div class="review-card">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="review-title">Estancia de ocio</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">La estancia fue agradable como siempre ya pasé varias veces por el hotel y la relación calidad precio es muy buena la ubicación no es muy lejana del centro por lo que recomiendo este hotel es un paseo hasta el centro</p>
                        <div class="review-details">
                            <span class="review-author">anubis7</span>
                            <span class="review-location">Guayaquil, Ecuador</span>
                            <span class="review-date">07/12/2023</span>
                        </div>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <div class="review-title">Excelente experiencia familiar</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">Habitaciones muy limpias y cómodas. El personal es muy amable y servicial. La zona de piscina es perfecta para niños y el spa es un verdadero lujo. Definitivamente volveremos.</p>
                        <div class="review-details">
                            <span class="review-author">maria_garcia</span>
                            <span class="review-location">Quito, Ecuador</span>
                            <span class="review-date">15/11/2023</span>
                        </div>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="review-title">Romántica escapada perfecta</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">Suite presidencial espectacular con vistas increíbles al mar. El desayuno incluido es delicioso y el servicio de habitaciones impecable. Ideal para parejas que buscan privacidad y lujo.</p>
                        <div class="review-details">
                            <span class="review-author">carlos_rodriguez</span>
                            <span class="review-location">Cuenca, Ecuador</span>
                            <span class="review-date">22/10/2023</span>
                        </div>
                    </div>
                </div>

                <div class="review-card hidden">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <div class="review-title">Muy buena relación calidad-precio</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">Habitación básica perfecta para una estancia corta. Limpia, funcional y bien ubicada. El personal es muy profesional y las instalaciones están en excelente estado.</p>
                        <div class="review-details">
                            <span class="review-author">ana_lopez</span>
                            <span class="review-location">Manta, Ecuador</span>
                            <span class="review-date">05/10/2023</span>
                        </div>
                    </div>
                </div>

                <div class="review-card hidden">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="review-title">Spa increíble</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">El spa del hotel es simplemente maravilloso. Los tratamientos son profesionales y relajantes. Combinado con la habitación de lujo, fue una experiencia inolvidable.</p>
                        <div class="review-details">
                            <span class="review-author">lucia_martin</span>
                            <span class="review-location">Ambato, Ecuador</span>
                            <span class="review-date">18/09/2023</span>
                        </div>
                    </div>
                </div>

                <div class="review-card hidden">
                    <div class="review-header">
                        <div class="review-stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <div class="review-title">Perfecto para familias</div>
                    </div>
                    <div class="review-content">
                        <p class="review-text">La zona para niños es fantástica y nuestros hijos se divirtieron mucho. Las habitaciones familiares son espaciosas y el desayuno buffet tiene opciones para todos los gustos.</p>
                        <div class="review-details">
                            <span class="review-author">juan_perez</span>
                            <span class="review-location">Esmeraldas, Ecuador</span>
                            <span class="review-date">30/08/2023</span>
                        </div>
                    </div>
                </div>
            </div>
            <button class="show-more-btn" onclick="mostrarMasResenas()">
                <span class="show-more-text">Mostrar más reseñas</span>
                <span class="show-less-text" style="display: none;">Mostrar menos</span>
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
    </section>

    <section id="contacto" class="contact">
        <h2>Contacto</h2>
        <div class="contact-container">
            <div class="contact-info">
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <p>Dirección: Km 4.5 Vía Punta Carnero, Sector Brisa Marina, Salinas, Santa Elena, Ecuador</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <p>Teléfono: +593 11111111</p>
                </div>
                <div class="contact-item">
                    <i class="fab fa-whatsapp"></i>
                    <p>WhatsApp: +593 22222222</p>
                    <p>WhatsApp: +593 33333333</p>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <p>Email: reservas@brizadelmar-anem.com</p>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Hotel Anem a Briza del Mar</h3>
                <p>Tu hogar lejos de casa</p>
            </div>
            <div class="footer-section">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="#inicio">Inicio</a></li>
                    <li><a href="#habitaciones">Habitaciones</a></li>
                    <li><a href="#paquetes">Paquetes</a></li>
                    <li><a href="#reservas">Reservas</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Síguenos</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Hotel Anem a Briza del Mar. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Modal de Reserva -->
    <div id="modalReserva" class="modal">
        <div class="modal-content">
            <span class="close" onclick="cerrarModalReserva()">&times;</span>
            <h2>Confirmar Reserva</h2>
            <div id="resumenReserva"></div>
            
            <!-- Sección de Desayunos (solo para habitación básica) -->
            <div id="seccionDesayunos" style="display: none;">
                <h3>Opciones de Desayuno</h3>
                <p class="desayuno-info">Selecciona los desayunos que desees. El total de desayunos no debe exceder el número de huéspedes. Los desayunos seleccionados estarán incluidos durante toda tu estadía.</p>
                <div class="desayunos-grid">
                    <div class="desayuno-opcion" data-tipo="basico">
                        <div class="desayuno-header">
                            <h4>Desayuno Básico</h4>
                            <p class="precio">$8 por persona</p>
                        </div>
                        <p>Incluye: Café, jugo, pan y fruta</p>
                        <div class="cantidad-control" style="display: none;">
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('basico', -1)">-</button>
                            <span class="cantidad">0</span>
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('basico', 1)">+</button>
                        </div>
                    </div>
                    <div class="desayuno-opcion" data-tipo="familiar">
                        <div class="desayuno-header">
                            <h4>Desayuno Familiar</h4>
                            <p class="precio">$12 por combo (5 personas)</p>
                        </div>
                        <p>Incluye: Desayuno básico + huevos y tocino</p>
                        <div class="cantidad-control" style="display: none;">
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('familiar', -1)">-</button>
                            <span class="cantidad">0</span>
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('familiar', 1)">+</button>
                        </div>
                    </div>
                    <div class="desayuno-opcion" data-tipo="pareja">
                        <div class="desayuno-header">
                            <h4>Desayuno Pareja</h4>
                            <p class="precio">$15 por combo (2 personas)</p>
                        </div>
                        <p>Incluye: Desayuno básico + champán y delicias especiales</p>
                        <div class="cantidad-control" style="display: none;">
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('pareja', -1)">-</button>
                            <span class="cantidad">0</span>
                            <button type="button" class="btn-cantidad" onclick="ajustarCantidad('pareja', 1)">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Factura -->
            <div class="factura">
                <h3><i class="fas fa-file-invoice-dollar"></i> Factura</h3>
                <div id="facturaDetalles"></div>
            </div>

            <div class="modal-buttons">
                <button id="cancelarReserva" onclick="cerrarModalReserva()">Cancelar</button>
                <button id="confirmarReserva" onclick="mostrarModalPago()">Confirmar Reserva</button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirmación -->
    <div id="modalConfirmacion" class="modal-confirmacion">
        <div class="confirmacion-reserva">
            <!-- El contenido se generará dinámicamente -->
        </div>
    </div>

    <!-- Modal de Pago -->
    <div id="paymentModal" class="payment-modal">
        <div class="payment-content">
            <span class="close" onclick="cerrarModalPago()">&times;</span>
            <div class="payment-header">
                <h3>Pago de Reserva</h3>
                <p>Complete sus datos personales y de pago para confirmar la reserva</p>
            </div>
            <form class="payment-form" id="paymentForm">
                <div class="form-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" id="email" placeholder="ejemplo@correo.com" required>
                </div>
                <div class="form-group">
                    <label for="phone">Teléfono</label>
                    <input type="tel" id="phone" placeholder="(123) 456-7890" maxlength="15" required>
                </div>
                <div class="form-group">
                    <label for="cardNumber">Número de Tarjeta</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                </div>
                <div class="form-group">
                    <label for="cardName">Nombre en la Tarjeta</label>
                    <input type="text" id="cardName" placeholder="Nombre como aparece en la tarjeta" pattern="[A-Za-z ]+" title="Solo letras y espacios permitidos" required>
                </div>
                <div class="form-group">
                    <label for="expiryDate">Fecha de Vencimiento</label>
                    <input type="text" id="expiryDate" placeholder="MM/AA" maxlength="5" required>
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" placeholder="123" maxlength="3" pattern="[0-9]{3}" title="Debe ser un número de 3 dígitos" required>
                </div>
                <button type="submit" class="payment-button">Pagar Ahora</button>
            </form>
        </div>
    </div>

    <!-- Modal de Bienvenida -->
    <div id="welcomeModal" class="welcome-modal">
        <div class="welcome-content">
            <div class="welcome-icon">
                <i class="fas fa-check"></i>
            </div>
            <h3 class="welcome-message">¡Reserva Confirmada!</h3>
            <p>Gracias por elegir Hotel Anem a Briza del Mar. Su reserva ha sido confirmada exitosamente.</p>
            <p>Hemos enviado los detalles de su reserva a su correo electrónico.</p>
            <button class="accept-button" onclick="finalizarReserva()">
                <i class="fas fa-check"></i> Aceptar
            </button>
        </div>
    </div>

    <script>
        // Cargar datos de habitaciones
        let habitacionesData = null;

        // Función para inicializar los datos
        async function inicializarDatos() {
            try {
                const response = await fetch('habitaciones.json');
                habitacionesData = await response.json();
                console.log('Datos cargados:', habitacionesData);
                actualizarDisponibilidad();
            } catch (error) {
                console.error('Error al cargar los datos:', error);
            }
        }

        // Función para validar las fechas
        function validarFechas(fechaEntrada, fechaSalida) {
            const hoy = new Date();
            hoy.setHours(0, 0, 0, 0); // Establecer la hora a 00:00:00
            
            const fechaEntradaObj = new Date(fechaEntrada);
            const fechaSalidaObj = new Date(fechaSalida);
            
            // Validar que la fecha de entrada no sea anterior a hoy
            if (fechaEntradaObj < hoy) {
                mostrarMensajeError('La fecha de entrada no puede ser anterior a hoy');
                return false;
            }
            
            // Validar que la fecha de salida no sea anterior a la fecha de entrada
            if (fechaSalidaObj <= fechaEntradaObj) {
                mostrarMensajeError('La fecha de salida debe ser posterior a la fecha de entrada');
                return false;
            }
            
            return true;
        }

        // Función para inicializar las fechas
        function inicializarFechas() {
            const fechaEntrada = document.getElementById('fechaEntrada');
            const fechaSalida = document.getElementById('fechaSalida');
            
            // Establecer la fecha mínima como hoy
            const hoy = new Date();
            const fechaMinima = hoy.toISOString().split('T')[0];
            fechaEntrada.min = fechaMinima;
            fechaSalida.min = fechaMinima;
            
            // Limpiar valores existentes
            fechaEntrada.value = '';
            fechaSalida.value = '';
            
            // Agregar event listeners
            fechaEntrada.addEventListener('change', function() {
                const fechaEntradaSeleccionada = new Date(this.value);
                fechaSalida.min = this.value;
                
                // Si la fecha de salida es anterior a la nueva fecha de entrada, actualizarla
                const fechaSalidaActual = new Date(fechaSalida.value);
                if (fechaSalidaActual <= fechaEntradaSeleccionada) {
                    fechaSalida.value = '';
                }
                
                if (this.value) {
                    actualizarDisponibilidad();
                }
            });

            fechaSalida.addEventListener('change', function() {
                const fechaEntradaValue = fechaEntrada.value;
                const fechaSalidaValue = this.value;
                
                if (!validarFechas(fechaEntradaValue, fechaSalidaValue)) {
                    this.value = '';
                    return;
                }
                
                if (this.value) {
                    actualizarDisponibilidad();
                }
            });
        }

        // Función para mostrar mensaje de error
        function mostrarMensajeError(mensaje) {
            // Remover mensajes de error existentes
            const mensajesExistentes = document.querySelectorAll('.mensaje-error');
            mensajesExistentes.forEach(msg => msg.remove());

            const mensajeError = document.createElement('div');
            mensajeError.className = 'mensaje-error';
            mensajeError.innerHTML = `
                <div class="mensaje-error-contenido">
                    <i class="fas fa-exclamation-circle"></i>
                    <p>${mensaje}</p>
                    <button class="cerrar-mensaje" title="Cerrar mensaje">&times;</button>
                </div>
            `;
            document.body.appendChild(mensajeError);

            // Cerrar mensaje al hacer clic en el botón
            mensajeError.querySelector('.cerrar-mensaje').addEventListener('click', () => {
                mensajeError.classList.add('cerrando');
                setTimeout(() => {
                    mensajeError.remove();
                }, 500);
            });

            // Cerrar mensaje automáticamente después de 5 segundos
            setTimeout(() => {
                if (mensajeError.parentNode) {
                    mensajeError.classList.add('cerrando');
                    setTimeout(() => {
                        if (mensajeError.parentNode) {
                            mensajeError.remove();
                        }
                    }, 500);
                }
            }, 5000);
        }

        // Función para calcular días entre dos fechas
        function calcularDias(fechaInicio, fechaFin) {
            const inicio = new Date(fechaInicio);
            const fin = new Date(fechaFin);
            const diffTime = Math.abs(fin - inicio);
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        // Función para formatear precio
        function formatearPrecio(precio) {
            return precio.toLocaleString('es-ES', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // Sistema de gestión de reservas por fecha
        let reservasPorFecha = {};

        // Función para agregar una reserva
        function agregarReserva(tipoHabitacion, fechaEntrada, fechaSalida) {
            const fechaInicio = new Date(fechaEntrada);
            const fechaFin = new Date(fechaSalida);
            
            for (let fecha = new Date(fechaInicio); fecha < fechaFin; fecha.setDate(fecha.getDate() + 1)) {
                const fechaStr = fecha.toISOString().split('T')[0];
                
                if (!reservasPorFecha[fechaStr]) {
                    reservasPorFecha[fechaStr] = {};
                }
                
                if (!reservasPorFecha[fechaStr][tipoHabitacion]) {
                    reservasPorFecha[fechaStr][tipoHabitacion] = 0;
                }
                
                reservasPorFecha[fechaStr][tipoHabitacion]++;
            }
            
            console.log('Reserva agregada:', reservasPorFecha);
        }

        // Función para obtener disponibilidad en una fecha específica
        function obtenerDisponibilidadEnFecha(fecha, tipoHabitacion) {
            if (!habitacionesData || !habitacionesData.habitaciones[tipoHabitacion]) {
                return 0;
            }
            
            const totalHabitaciones = habitacionesData.habitaciones[tipoHabitacion].total;
            const reservasEnFecha = reservasPorFecha[fecha] && reservasPorFecha[fecha][tipoHabitacion] ? reservasPorFecha[fecha][tipoHabitacion] : 0;
            
            return Math.max(0, totalHabitaciones - reservasEnFecha);
        }

        // Función para verificar disponibilidad en un rango de fechas
        function verificarDisponibilidadEnRango(fechaEntrada, fechaSalida, tipoHabitacion) {
            const fechaInicio = new Date(fechaEntrada);
            const fechaFin = new Date(fechaSalida);
            
            for (let fecha = new Date(fechaInicio); fecha < fechaFin; fecha.setDate(fecha.getDate() + 1)) {
                const fechaStr = fecha.toISOString().split('T')[0];
                const disponibles = obtenerDisponibilidadEnFecha(fechaStr, tipoHabitacion);
                
                if (disponibles <= 0) {
                    return false;
                }
            }
            
            return true;
        }

        // Función para obtener la disponibilidad mínima en un rango de fechas
        function obtenerDisponibilidadMinimaEnRango(fechaEntrada, fechaSalida, tipoHabitacion) {
            const fechaInicio = new Date(fechaEntrada);
            const fechaFin = new Date(fechaSalida);
            let disponibilidadMinima = Infinity;
            
            for (let fecha = new Date(fechaInicio); fecha < fechaFin; fecha.setDate(fecha.getDate() + 1)) {
                const fechaStr = fecha.toISOString().split('T')[0];
                const disponibles = obtenerDisponibilidadEnFecha(fechaStr, tipoHabitacion);
                disponibilidadMinima = Math.min(disponibilidadMinima, disponibles);
            }
            
            return disponibilidadMinima;
        }

        // Función para validar disponibilidad de habitaciones (actualizada)
        function validarDisponibilidad(fechaEntrada, fechaSalida, tipoHabitacion) {
            if (!habitacionesData || !habitacionesData.habitaciones[tipoHabitacion]) {
                return false;
            }

            // Verificar disponibilidad en el rango de fechas
            return verificarDisponibilidadEnRango(fechaEntrada, fechaSalida, tipoHabitacion);
        }

        // Función para actualizar disponibilidad y precios (actualizada)
        function actualizarDisponibilidad() {
            if (!habitacionesData) {
                console.log('Los datos aún no están cargados');
                return;
            }

            const fechaEntrada = document.getElementById('fechaEntrada').value;
            const fechaSalida = document.getElementById('fechaSalida').value;
            const numHuespedes = parseInt(document.getElementById('numHuespedes').value) || 0;

            console.log('Actualizando con:', { fechaEntrada, fechaSalida, numHuespedes });

            if (fechaEntrada && fechaSalida) {
                const dias = calcularDias(fechaEntrada, fechaSalida);
                console.log('Días calculados:', dias);

                document.querySelectorAll('.room-card').forEach(card => {
                    const tipo = card.dataset.tipo;
                    const habitacion = habitacionesData.habitaciones[tipo];
                    const badge = card.querySelector('.disponibilidad-badge');
                    const precioOriginal = card.querySelector('.precio-original');
                    const precioFinal = card.querySelector('.precio-final .total-noches');
                    const priceTag = card.querySelector('.price');
                    const bookNowBtn = card.querySelector('.book-now');

                    // Verificar si la habitación puede alojar al número de huéspedes
                    const excedeCapacidad = numHuespedes > 0 && numHuespedes > habitacion.max_huespedes;
                    
                    // Verificar disponibilidad para las fechas seleccionadas
                    const disponible = validarDisponibilidad(fechaEntrada, fechaSalida, tipo);
                    
                    // Obtener la disponibilidad mínima en el rango de fechas
                    const disponibilidadMinima = obtenerDisponibilidadMinimaEnRango(fechaEntrada, fechaSalida, tipo);
                    
                    // Actualizar disponibilidad y estilo
                    if (excedeCapacidad || !disponible) {
                        badge.textContent = 'No disponible';
                        badge.className = 'disponibilidad-badge no-disponible';
                        card.style.opacity = '0.7';
                        bookNowBtn.disabled = true;
                        bookNowBtn.style.cursor = 'not-allowed';
                        card.style.pointerEvents = 'none';
                    } else {
                        badge.textContent = `${disponibilidadMinima} disponibles`;
                        badge.className = 'disponibilidad-badge disponible';
                        card.style.opacity = '1';
                        bookNowBtn.disabled = false;
                        bookNowBtn.style.cursor = 'pointer';
                        card.style.pointerEvents = 'auto';
                    }

                    // Actualizar precios
                    const precioPorNoche = habitacion.precio_noche;
                    const total = precioPorNoche * dias;

                    // Actualizar precio por noche
                    if (precioOriginal) {
                        precioOriginal.textContent = `$${formatearPrecio(precioPorNoche)} por noche`;
                    }
                    if (priceTag) {
                        priceTag.textContent = `$${formatearPrecio(precioPorNoche)}/noche`;
                    }

                    // Actualizar precio total
                    if (precioFinal) {
                        precioFinal.textContent = formatearPrecio(total);
                    }
                });

                // Mostrar información de disponibilidad
                const disponibilidadInfo = document.getElementById('disponibilidadInfo');
                if (disponibilidadInfo && numHuespedes > 0) {
                    disponibilidadInfo.innerHTML = `
                        <p>Estadía de ${dias} ${dias === 1 ? 'día' : 'días'} para ${numHuespedes} ${numHuespedes === 1 ? 'huésped' : 'huéspedes'}</p>
                    `;
                } else if (disponibilidadInfo) {
                    disponibilidadInfo.innerHTML = '';
                }
            } else {
                // Si no hay fechas, resetear las tarjetas de habitación
                document.querySelectorAll('.room-card').forEach(card => {
                    const tipo = card.dataset.tipo;
                    const habitacion = habitacionesData.habitaciones[tipo];
                    const badge = card.querySelector('.disponibilidad-badge');
                    const bookNowBtn = card.querySelector('.book-now');

                    badge.textContent = 'Disponible';
                    badge.className = 'disponibilidad-badge disponible';
                    card.style.opacity = '1';
                    bookNowBtn.disabled = false;
                    bookNowBtn.style.cursor = 'pointer';
                    card.style.pointerEvents = 'auto';
                });
            }
        }

        // Variables globales para el modal
        let reservaActual = null;

        // Función para mostrar el modal de reserva
        function mostrarModalReserva() {
            const fechaEntrada = document.getElementById('fechaEntrada').value;
            const fechaSalida = document.getElementById('fechaSalida').value;
            const numHuespedes = document.getElementById('numHuespedes').value;
            const tipoHabitacion = document.getElementById('tipoHabitacion').value;

            if (!fechaEntrada || !fechaSalida || !numHuespedes) {
                mostrarMensajeError('Por favor, seleccione las fechas de entrada y salida, y el número de huéspedes antes de reservar.');
                return;
            }

            const diasEstancia = calcularDiasEstancia(fechaEntrada, fechaSalida);
            const modal = document.getElementById('modalReserva');
            const modalContent = modal.querySelector('.modal-content');
            
            let content = `
                <span class="close" onclick="cerrarModalReserva()">&times;</span>
                <div class="resumen-reserva">
                    <h3><i class="fas fa-clipboard-list"></i> Resumen de la Reserva</h3>
                    <p>
                        <strong>Tipo de Habitación:</strong>
                        <span>${tipoHabitacion === 'basica' ? 'Básica' : tipoHabitacion === 'intermedia' ? 'Intermedia' : 'Presidencial'}</span>
                    </p>
                    <p>
                        <strong>Fecha de Entrada:</strong>
                        <span>${fechaEntrada}</span>
                    </p>
                    <p>
                        <strong>Fecha de Salida:</strong>
                        <span>${fechaSalida}</span>
                    </p>
                    <p>
                        <strong>Número de Huéspedes:</strong>
                        <span>${numHuespedes}</span>
                    </p>
                    <p>
                        <strong>Duración de la Estancia:</strong>
                        <span>${diasEstancia} días</span>
                    </p>
                </div>
            `;

            if (tipoHabitacion === 'basica') {
                content += `
                    <div class="seccion-desayunos">
                        <h3>Selección de Desayunos</h3>
                        <p class="desayuno-info">Seleccione los desayunos que desee. El total de desayunos no debe exceder el número de huéspedes (${numHuespedes}). Los desayunos seleccionados estarán incluidos durante toda su estadía.</p>
                        <div class="desayunos-grid">
                            <div class="desayuno-opcion" data-tipo="basico">
                                <div class="desayuno-header">
                                    <h4>Desayuno Básico</h4>
                                    <p class="precio">$8 por persona</p>
                                </div>
                                <p class="desayuno-info">Incluye: Café, jugo, pan y fruta</p>
                                <div class="cantidad-control">
                                    <button class="btn-cantidad" onclick="ajustarCantidad('basico', -1)">-</button>
                                    <span class="cantidad" id="cantidadBasico">0</span>
                                    <button class="btn-cantidad" onclick="ajustarCantidad('basico', 1)">+</button>
                                </div>
                            </div>
                            <div class="desayuno-opcion" data-tipo="familiar">
                                <div class="desayuno-header">
                                    <h4>Desayuno Familiar</h4>
                                    <p class="precio">$12 por combo (5 personas)</p>
                                </div>
                                <p class="desayuno-info">Incluye: Desayuno básico + huevos y tocino</p>
                                <div class="cantidad-control">
                                    <button class="btn-cantidad" onclick="ajustarCantidad('familiar', -1)">-</button>
                                    <span class="cantidad" id="cantidadFamiliar">0</span>
                                    <button class="btn-cantidad" onclick="ajustarCantidad('familiar', 1)">+</button>
                                </div>
                            </div>
                            <div class="desayuno-opcion" data-tipo="pareja">
                                <div class="desayuno-header">
                                    <h4>Desayuno Pareja</h4>
                                    <p class="precio">$15 por combo (2 personas)</p>
                                </div>
                                <p class="desayuno-info">Incluye: Desayuno básico + champán y delicias especiales</p>
                                <div class="cantidad-control">
                                    <button class="btn-cantidad" onclick="ajustarCantidad('pareja', -1)">-</button>
                                    <span class="cantidad" id="cantidadPareja">0</span>
                                    <button class="btn-cantidad" onclick="ajustarCantidad('pareja', 1)">+</button>
                                </div>
                            </div>
                        </div>
                        <div class="desayuno-opcional">
                            <i class="fas fa-info-circle"></i>
                            <span>La selección de desayunos es opcional</span>
                        </div>
                    </div>
                `;
            } else {
                content += `
                    <div class="desayuno-incluido">
                        <i class="fas fa-check-circle"></i> Desayuno incluido durante toda su estadía
                    </div>
                `;
            }

            content += `
                <div class="factura">
                    <h3><i class="fas fa-file-invoice-dollar"></i> Factura</h3>
                    <div id="facturaDetalles"></div>
                </div>
                <div class="modal-buttons">
                    <button class="btn-cancelar" onclick="cerrarModalReserva()">Cancelar</button>
                    <button class="btn-confirmar" onclick="mostrarModalPago()">Confirmar Reserva</button>
                </div>
            `;

            modalContent.innerHTML = content;
            modal.style.display = 'flex';
            actualizarFactura();
        }

        function ajustarCantidad(tipo, cambio) {
            const cantidadElement = document.getElementById(`cantidad${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`);
            const cantidadActual = parseInt(cantidadElement.textContent);
            const numHuespedes = parseInt(document.getElementById('numHuespedes').value);
            
            // Definir las personas por combo para cada tipo de desayuno
            const personasPorCombo = {
                'basico': 1,      // 1 persona por desayuno básico
                'familiar': 5,    // 5 personas por combo familiar
                'pareja': 2       // 2 personas por combo pareja
            };
            
            // Calcular el total de personas cubiertas por los desayunos seleccionados
            let totalPersonasCubiertas = 0;
            document.querySelectorAll('.cantidad').forEach(element => {
                if (element.id !== cantidadElement.id) {
                    const tipoDesayuno = element.id.replace('cantidad', '').toLowerCase();
                    const cantidad = parseInt(element.textContent);
                    totalPersonasCubiertas += cantidad * personasPorCombo[tipoDesayuno];
                }
            });

            const nuevaCantidad = cantidadActual + cambio;
            
            if (nuevaCantidad >= 0) {
                // Calcular cuántas personas cubriría la nueva cantidad
                const personasNuevaCantidad = nuevaCantidad * personasPorCombo[tipo];
                const totalConNuevaCantidad = totalPersonasCubiertas + personasNuevaCantidad;
                
                if (totalConNuevaCantidad <= numHuespedes) {
                    cantidadElement.textContent = nuevaCantidad;
                    actualizarFactura();
                } else {
                    mostrarMensajeError(`No puede seleccionar más desayunos que cubran al número de huéspedes (${numHuespedes})`);
                }
            }
        }

        function actualizarFactura() {
            const tipoHabitacion = document.getElementById('tipoHabitacion').value;
            const diasEstancia = calcularDiasEstancia(
                document.getElementById('fechaEntrada').value,
                document.getElementById('fechaSalida').value
            );
            
            let total = 0;
            let detalles = '';

            // Precio base de la habitación
            const preciosHabitacion = {
                'basica': 10,
                'intermedia': 25,
                'presidencial': 45
            };

            const precioHabitacion = preciosHabitacion[tipoHabitacion] * diasEstancia;
            total += precioHabitacion;

            // Estructura HTML de la factura
            detalles = `
                <div class="factura-detalles">
                    <div class="concepto-habitacion">
                        <strong>Habitación ${tipoHabitacion === 'basica' ? 'Básica' : tipoHabitacion === 'intermedia' ? 'Intermedia' : 'Presidencial'}</strong>
                        <span>$${precioHabitacion}</span>
                    </div>
            `;

            // Agregar desayunos si es habitación básica
            if (tipoHabitacion === 'basica') {
                const preciosDesayuno = {
                    'basico': 8,
                    'familiar': 12,
                    'pareja': 15
                };

                // Definir las personas por combo para cada tipo de desayuno
                const personasPorCombo = {
                    'basico': 1,      // 1 persona por desayuno básico
                    'familiar': 5,    // 5 personas por combo familiar
                    'pareja': 2       // 2 personas por combo pareja
                };

                let hayDesayunosSeleccionados = false;
                for (const tipo in preciosDesayuno) {
                    const cantidad = parseInt(document.getElementById(`cantidad${tipo.charAt(0).toUpperCase() + tipo.slice(1)}`).textContent);
                    if (cantidad > 0) {
                        hayDesayunosSeleccionados = true;
                        const precioDesayuno = preciosDesayuno[tipo];
                        const personasCubiertas = cantidad * personasPorCombo[tipo];
                        total += precioDesayuno * cantidad;
                        
                        // Mostrar información según el tipo de desayuno
                        let descripcionDesayuno = '';
                        if (tipo === 'basico') {
                            descripcionDesayuno = `Desayuno Básico (${cantidad} persona${cantidad > 1 ? 's' : ''})`;
                        } else if (tipo === 'familiar') {
                            descripcionDesayuno = `Combo Familiar (${cantidad} combo${cantidad > 1 ? 's' : ''} - ${personasCubiertas} personas)`;
                        } else if (tipo === 'pareja') {
                            descripcionDesayuno = `Combo Pareja (${cantidad} combo${cantidad > 1 ? 's' : ''} - ${personasCubiertas} personas)`;
                        }
                        
                        detalles += `
                            <div class="concepto-desayuno">
                                <strong>${descripcionDesayuno}</strong>
                                <span>$${precioDesayuno * cantidad}</span>
                            </div>
                        `;
                    }
                }
            } else {
                detalles += `
                    <div class="desayuno-incluido">
                        <i class="fas fa-check-circle"></i>
                        <strong>Desayuno Incluido</strong>
                        <span>Gratis</span>
                    </div>
                `;
            }

            detalles += `
                    <div class="total">
                        <strong>Total a Pagar</strong>
                        <span>$${total}</span>
                    </div>
                </div>
            `;

            document.getElementById('facturaDetalles').innerHTML = detalles;
        }

        function calcularDiasEstancia(fechaEntrada, fechaSalida) {
            const entrada = new Date(fechaEntrada);
            const salida = new Date(fechaSalida);
            const diffTime = Math.abs(salida - entrada);
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        // Función para limpiar selecciones
        function limpiarSelecciones() {
            document.querySelectorAll('.cantidad').forEach(element => {
                element.textContent = '0';
            });
            document.getElementById('resumenReserva').innerHTML = '';
        }

        // Función para cerrar el modal de reserva
        function cerrarModalReserva() {
            const modal = document.getElementById('modalReserva');
            modal.style.display = 'none';
            limpiarSelecciones();
        }

        // Event listeners para los botones de reserva
        document.querySelectorAll('.book-now').forEach(button => {
            button.addEventListener('click', function() {
                const tipoHabitacion = this.closest('.room-card').dataset.tipo;
                document.getElementById('tipoHabitacion').value = tipoHabitacion;
                mostrarModalReserva();
            });
        });

        // Event listener para el formulario de pago
        document.getElementById('paymentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            if (validarFormularioPago()) {
            cerrarModalPago();
            mostrarModalBienvenida();
            }
        });

        // Función para validar el formulario de pago
        function validarFormularioPago() {
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const cardNumber = document.getElementById('cardNumber').value;
            const cardName = document.getElementById('cardName').value;
            const expiryDate = document.getElementById('expiryDate').value;
            const cvv = document.getElementById('cvv').value;

            // Validar email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                mostrarMensajeError('Por favor, ingrese un correo electrónico válido');
                return false;
            }

            // Validar teléfono (formato: (123) 456-7890)
            const phoneRegex = /^\(\d{3}\) \d{3}-\d{4}$/;
            if (!phoneRegex.test(phone)) {
                mostrarMensajeError('Por favor, ingrese un número de teléfono válido en el formato (123) 456-7890');
                return false;
            }

            // Validar número de tarjeta (16 dígitos)
            const cardNumberClean = cardNumber.replace(/\s/g, '');
            if (cardNumberClean.length !== 16 || !/^\d+$/.test(cardNumberClean)) {
                mostrarMensajeError('Por favor, ingrese un número de tarjeta válido de 16 dígitos');
                return false;
            }

            // Validar nombre de tarjeta (solo letras y espacios)
            if (!/^[A-Za-z ]+$/.test(cardName)) {
                mostrarMensajeError('El nombre en la tarjeta solo puede contener letras y espacios');
                return false;
            }

            // Validar fecha de vencimiento (formato MM/AA)
            const expiryRegex = /^(0[1-9]|1[0-2])\/([0-9]{2})$/;
            if (!expiryRegex.test(expiryDate)) {
                mostrarMensajeError('Por favor, ingrese una fecha de vencimiento válida en el formato MM/AA');
                return false;
            }

            // Validar CVV (3 dígitos)
            if (!/^\d{3}$/.test(cvv)) {
                mostrarMensajeError('El CVV debe ser un número de 3 dígitos');
                return false;
            }

            return true;
        }

        // Formateo de número de teléfono
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                if (value.length <= 3) {
                    value = `(${value}`;
                } else if (value.length <= 6) {
                    value = `(${value.substring(0, 3)}) ${value.substring(3)}`;
                } else {
                    value = `(${value.substring(0, 3)}) ${value.substring(3, 6)}-${value.substring(6, 10)}`;
                }
            }
            e.target.value = value;
        });

        // Formateo de número de tarjeta
        document.getElementById('cardNumber').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            let formattedValue = '';
            for(let i = 0; i < value.length; i++) {
                if(i > 0 && i % 4 === 0) {
                    formattedValue += ' ';
                }
                formattedValue += value[i];
            }
            e.target.value = formattedValue;
        });

        // Formateo de fecha de vencimiento
        document.getElementById('expiryDate').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if(value.length >= 2) {
                value = value.substring(0,2) + '/' + value.substring(2);
            }
            e.target.value = value;
        });

        // Validación de nombre de tarjeta (solo letras y espacios)
        document.getElementById('cardName').addEventListener('input', function(e) {
            let value = e.target.value.replace(/[^A-Za-z ]/g, '');
            e.target.value = value;
        });

        // Función para mostrar el modal de bienvenida
        function mostrarModalBienvenida() {
            document.getElementById('welcomeModal').style.display = 'block';
        }

        // Función para mostrar el modal de pago
        function mostrarModalPago() {
            const modal = document.getElementById('paymentModal');
            if (modal) {
                modal.style.display = 'flex';
                // Limpiar el formulario
                document.getElementById('paymentForm').reset();
            } else {
                console.error('Modal de pago no encontrado');
            }
        }

        // Función para cerrar el modal de pago
        function cerrarModalPago() {
            const modal = document.getElementById('paymentModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Event listener para cerrar el modal de pago con el botón X
        document.querySelector('#paymentModal .close').addEventListener('click', cerrarModalPago);

        // Event listener para cerrar el modal de pago al hacer clic fuera
        document.getElementById('paymentModal').addEventListener('click', function(e) {
            if (e.target === this) {
                cerrarModalPago();
            }
        });

        // Descargar comprobante
        function descargarComprobante() {
            const comprobante = document.getElementById('resumenReserva');
            const comprobanteHTML = comprobante.innerHTML;
            const element = document.createElement('a');
            const file = new Blob([comprobanteHTML], {type: 'text/html'});
            element.href = URL.createObjectURL(file);
            element.download = 'comprobante-reserva.html';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM cargado, inicializando...');
            inicializarDatos();
            inicializarFechas();

            // Event listeners para el formulario
            document.getElementById('searchForm').addEventListener('submit', function(e) {
                e.preventDefault();
            const fechaEntrada = document.getElementById('fechaEntrada');
            const fechaSalida = document.getElementById('fechaSalida');
            
                if (!fechaEntrada.value || !fechaSalida.value) {
                    mostrarMensajeError('Por favor, seleccione las fechas de entrada y salida');
                    return;
                }
                
                if (!validarFechas(fechaEntrada.value, fechaSalida.value)) {
                    return;
                }
                
                console.log('Formulario enviado');
                actualizarDisponibilidad();
            });

            document.getElementById('numHuespedes').addEventListener('change', function() {
                console.log('Número de huéspedes cambiado');
                actualizarDisponibilidad();
        });

        // Event listeners para las opciones de desayuno
        document.querySelectorAll('.desayuno-opcion').forEach(opcion => {
            opcion.addEventListener('click', function(e) {
                if (!e.target.classList.contains('btn-cantidad')) {
                    const tipo = this.dataset.tipo;
                    const seleccion = this.querySelector('.cantidad-control');
                    const cantidad = this.querySelector('.cantidad');
                    
                    // Deseleccionar otros
                    document.querySelectorAll('.desayuno-opcion').forEach(o => {
                        o.classList.remove('seleccionada');
                        const ctrl = o.querySelector('.cantidad-control');
                        if (ctrl) ctrl.style.display = 'none';
                        const cant = o.querySelector('.cantidad');
                        if (cant) cant.textContent = '0';
                    });

                    // Seleccionar este
                    this.classList.add('seleccionada');
                    seleccion.style.display = 'flex';
                    cantidad.textContent = '0';
                    
                    actualizarFactura();
                }
            });
            });

            // Event listener para confirmar reserva
            document.getElementById('confirmarReserva').addEventListener('click', function() {
                confirmarReserva();
            });

            // Event listener para cancelar reserva
            document.getElementById('cancelarReserva').addEventListener('click', function() {
                document.getElementById('modalReserva').style.display = 'none';
            });
        });

        // Función para actualizar el contador de habitaciones
        function actualizarContadorHabitaciones(tipoHabitacion) {
            if (habitacionesData && habitacionesData.habitaciones[tipoHabitacion]) {
                habitacionesData.habitaciones[tipoHabitacion].disponibles--;
                
                // Actualizar la interfaz
                const roomCard = document.querySelector(`.room-card[data-tipo="${tipoHabitacion}"]`);
                if (roomCard) {
                    const badge = roomCard.querySelector('.disponibilidad-badge');
                    if (badge) {
                        const disponibles = habitacionesData.habitaciones[tipoHabitacion].disponibles;
                        badge.textContent = `${disponibles} disponibles`;
                        
                        if (disponibles === 0) {
                            badge.className = 'disponibilidad-badge no-disponible';
                            badge.textContent = 'No disponible';
                            roomCard.style.opacity = '0.7';
                            const bookNowBtn = roomCard.querySelector('.book-now');
                            if (bookNowBtn) {
                                bookNowBtn.disabled = true;
                                bookNowBtn.style.cursor = 'not-allowed';
                            }
                        }
                    }
                }
            }
        }

        // Función para finalizar la reserva (actualizada)
        function finalizarReserva() {
            const tipoHabitacion = document.getElementById('tipoHabitacion').value;
            const fechaEntrada = document.getElementById('fechaEntrada').value;
            const fechaSalida = document.getElementById('fechaSalida').value;
            
            // Agregar la reserva al sistema
            agregarReserva(tipoHabitacion, fechaEntrada, fechaSalida);
            
            // Cerrar el modal de bienvenida
            document.getElementById('welcomeModal').style.display = 'none';
            
            // Limpiar el formulario de búsqueda
            document.getElementById('searchForm').reset();
            
            // Limpiar la información de disponibilidad
            document.getElementById('disponibilidadInfo').innerHTML = '';
            
            // Limpiar los campos de fecha
            const fechaEntradaInput = document.getElementById('fechaEntrada');
            const fechaSalidaInput = document.getElementById('fechaSalida');
            fechaEntradaInput.value = '';
            fechaSalidaInput.value = '';
            
            // Limpiar el selector de huéspedes
            document.getElementById('numHuespedes').value = '';
            
            // Limpiar el tipo de habitación
            document.getElementById('tipoHabitacion').value = '';
            
            // Actualizar la disponibilidad de todas las habitaciones
            actualizarDisponibilidad();
            
            // Mostrar mensaje de éxito
            mostrarMensajeError('¡Reserva realizada con éxito!');
            
            // Limpiar cualquier modal que pudiera estar abierto
            document.getElementById('modalReserva').style.display = 'none';
            document.getElementById('paymentModal').style.display = 'none';
            
            // Limpiar la factura y el resumen de reserva
            document.getElementById('facturaDetalles').innerHTML = '';
            document.getElementById('resumenReserva').innerHTML = '';
            
            // Limpiar los contadores de desayunos si existen
            document.querySelectorAll('.cantidad').forEach(element => {
                element.textContent = '0';
            });
            
            // Ocultar la sección de desayunos si está visible
            const seccionDesayunos = document.getElementById('seccionDesayunos');
            if (seccionDesayunos) {
                seccionDesayunos.style.display = 'none';
            }
        }

        // Variables para el carrusel
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-slide');
        const dots = document.querySelectorAll('.dot');

        // Función para cambiar slide
        function cambiarSlide(direction) {
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = (currentSlide + direction + slides.length) % slides.length;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        // Función para ir a un slide específico
        function irASlide(index) {
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = index;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
        }

        // Auto-play del carrusel
        function autoPlay() {
            cambiarSlide(1);
        }

        // Iniciar auto-play cada 5 segundos
        let autoPlayInterval = setInterval(autoPlay, 5000);

        // Pausar auto-play cuando el usuario interactúa con el carrusel
        document.querySelector('.carousel-container').addEventListener('mouseenter', () => {
            clearInterval(autoPlayInterval);
        });

        // Reanudar auto-play cuando el usuario deja de interactuar
        document.querySelector('.carousel-container').addEventListener('mouseleave', () => {
            autoPlayInterval = setInterval(autoPlay, 5000);
        });

        // Función para mostrar/ocultar más reseñas
        function mostrarMasResenas() {
            const hiddenCards = document.querySelectorAll('.review-card.hidden');
            const showMoreBtn = document.querySelector('.show-more-btn');
            const showMoreText = document.querySelector('.show-more-text');
            const showLessText = document.querySelector('.show-less-text');
            const btnIcon = showMoreBtn.querySelector('i');

            if (hiddenCards.length > 0) {
                // Mostrar todas las tarjetas ocultas
                hiddenCards.forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.remove('hidden');
                        card.classList.add('show');
                    }, index * 100);
                });

                // Cambiar el texto del botón
                showMoreText.style.display = 'none';
                showLessText.style.display = 'inline';
                showMoreBtn.classList.add('expanded');
            } else {
                // Ocultar las tarjetas adicionales
                const allCards = document.querySelectorAll('.review-card');
                allCards.forEach((card, index) => {
                    if (index >= 3) {
                        setTimeout(() => {
                            card.classList.add('hidden');
                            card.classList.remove('show');
                        }, (index - 3) * 100);
                    }
                });

                // Cambiar el texto del botón
                showMoreText.style.display = 'inline';
                showLessText.style.display = 'none';
                showMoreBtn.classList.remove('expanded');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');

            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });
        });
    </script>
</body>
</html> 